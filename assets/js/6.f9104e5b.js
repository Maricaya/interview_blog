(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{353:function(t,v,_){t.exports=_.p+"assets/img/cache.0ff04728.jpg"},354:function(t,v,_){t.exports=_.p+"assets/img/http2.348b4fb8.png"},375:function(t,v,_){"use strict";_.r(v);var a=_(42),s=Object(a.a)({},(function(){var t=this,v=t.$createElement,a=t._self._c||v;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"http-缓存有哪几种"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http-缓存有哪几种"}},[t._v("#")]),t._v(" HTTP 缓存有哪几种？")]),t._v(" "),a("h2",{attrs:{id:"http-1-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http-1-0"}},[t._v("#")]),t._v(" HTTP 1.0")]),t._v(" "),a("h3",{attrs:{id:"缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缓存"}},[t._v("#")]),t._v(" 缓存")]),t._v(" "),a("p",[t._v("为了减轻服务器的压力，在 HTTP/1.0 中提供了 Cache 机制。")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("Expires")]),t._v("：强制缓存。缓存服务器上的过期时间。")]),t._v(" "),a("ul",[a("li",[t._v("用来指定资源到期的时间")]),t._v(" "),a("li",[t._v("问题：受限于本地时间。如果用户改了本地时间，就没用了")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("Last-Modified")]),t._v("：协商缓存。")]),t._v(" "),a("ul",[a("li",[t._v("资源在服务器上的最后修改时间。")]),t._v(" "),a("li",[t._v("问题：一个资源被修改了，但其实际内容根本没发生改变，也会返回整个实体给客户端（即使客户端缓存里有个一模一样的资源）。")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("客户端会为资源标记上该信息，下次再次请求时，会把该信息附带在请求报文中一并带给服务器去做检查，若传递的时间值与服务器上该资源最终修改时间是一致的，则说明该资源没有被修改过，直接返回304状态码，内容为空，这样就节省了传输数据量 。如果两个时间不一致，则服务器会发回该资源并返回200状态码，和第一次请求时类似。这样保证不向客户端重复发出资源，也保证当服务器有变化时，客户端能够得到最新的资源。一个304响应比一个静态资源通常小得多，这样就节省了网络带宽。")])]),t._v(" "),a("h2",{attrs:{id:"http-1-1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http-1-1"}},[t._v("#")]),t._v(" HTTP/1.1")]),t._v(" "),a("p",[t._v("随着技术的发展，很快 HTTP/1.0 也不能满足需求了。")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("Cache-Control")]),t._v("： 强制缓存")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("Expires")]),t._v(" http1.1 新增了 Cache-Control 来定义缓存过期时间 "),a("code",[t._v("max-age=3600")]),t._v("。")])]),t._v(" "),a("p",[t._v("注意：若报文中同时出现了 "),a("code",[t._v("Expires")]),t._v(" 和 "),a("code",[t._v("Cache-Control")]),t._v("，则以 Cache-Control 为准。")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("ETag")]),t._v("：协商缓存：根据内容计算出的唯一标识符")]),t._v(" "),a("ul",[a("li",[t._v("为了解决上述 "),a("code",[t._v("Last-Modified")]),t._v(" 可能存在的不准确的问题，Http1.1 还推出了 ETag 实体首部字段。")])])])]),t._v(" "),a("h2",{attrs:{id:"强制缓存-与-协商缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#强制缓存-与-协商缓存"}},[t._v("#")]),t._v(" 强制缓存 与 协商缓存")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("浏览器在加载资源时，根据请求头的 "),a("code",[t._v("expires")]),t._v(" 和 "),a("code",[t._v("cache-control")]),t._v(" 判断是否命中强缓存，是则直接从缓存读取资源，不会发请求到服务器。")])]),t._v(" "),a("li",[a("p",[t._v("如果没有命中强缓存，浏览器一定会发送一个请求到服务器，通过 "),a("code",[t._v("last-modified")]),t._v(" 和 "),a("code",[t._v("etag")]),t._v(" 验证资源是否命中协商缓存，如果命中，服务器会将这个请求返回，但是不会返回这个资源的数据，依然是从缓存中读取资源")])])]),t._v(" "),a("p",[t._v("3.如果前面两者都没有命中，直接从服务器加载资源\n"),a("img",{attrs:{src:_(353),alt:""}})]),t._v(" "),a("h2",{attrs:{id:"http1-vs-http2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http1-vs-http2"}},[t._v("#")]),t._v(" http1 vs http2")]),t._v(" "),a("p",[t._v("多路复用、服务器推送、强制开启https")]),t._v(" "),a("h3",{attrs:{id:"多路复用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#多路复用"}},[t._v("#")]),t._v(" 多路复用")]),t._v(" "),a("p",[a("img",{attrs:{src:_(354),alt:""}})]),t._v(" "),a("ul",[a("li",[a("p",[t._v("每个请求都有一个对应的 ID")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("如stream1表示index.html的请求，stream2表示foo.css的请求。")])]),t._v(" "),a("li",[a("p",[t._v("这样在浏览器端，就可以随时将请求发送给服务器了。")])]),t._v(" "),a("li",[a("p",[t._v("是因为每份数据都有对应的ID，服务器端返回的顺序可以不固定。")])]),t._v(" "),a("li",[a("p",[t._v("浏览器接收到之后，会筛选出相同ID的内容，将其拼接为完整的HTTP响应数据。")])])])])]),t._v(" "),a("h3",{attrs:{id:"服务器推送"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务器推送"}},[t._v("#")]),t._v(" 服务器推送")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("将数据提前推送到浏览器。")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("比如 用户请求一个HTML⻚面")])]),t._v(" "),a("li",[a("p",[t._v("服务器知道该HTML⻚面会引用几个重要的JavaScript文件和CSS文件")])]),t._v(" "),a("li",[a("p",[t._v("服务器直接把这些资源都发送给浏览器")])]),t._v(" "),a("li",[a("p",[t._v("当浏览器解析完HTML文件之后，就能直接拿到需要的CSS文件和JavaScript文件")])]),t._v(" "),a("li",[a("p",[t._v("这对首次打开⻚面的速度起到了至关 重要的作用。")])])])])]),t._v(" "),a("h3",{attrs:{id:"强制开启https"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#强制开启https"}},[t._v("#")]),t._v(" 强制开启https")]),t._v(" "),a("h3",{attrs:{id:"头部压缩"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#头部压缩"}},[t._v("#")]),t._v(" 头部压缩")])])}),[],!1,null,null,null);v.default=s.exports}}]);