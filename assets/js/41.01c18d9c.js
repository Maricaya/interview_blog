(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{403:function(t,e,s){"use strict";s.r(e);var a=s(42),r=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"nexttick"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nexttick"}},[t._v("#")]),t._v(" NextTick")]),t._v(" "),s("h2",{attrs:{id:"什么时候会用到-vue-nexttick"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#什么时候会用到-vue-nexttick"}},[t._v("#")]),t._v(" 什么时候会用到 Vue.nextTick()")]),t._v(" "),s("p",[t._v("因为 Vue DOM 更新是异步的。\n修改数据时，视图不会立即更新，而是会监听数据变化，并缓存在")]),t._v(" "),s("h2",{attrs:{id:"实现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实现"}},[t._v("#")]),t._v(" 实现")]),t._v(" "),s("p",[t._v("宏任务、微任务。\n宏任务耗费的时间是大于微任务的，所以在浏览器支持的情况下，先找到宏任务")]),t._v(" "),s("p",[t._v("先找宏任务、再找微任务")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("micro task 有 MutationObsever 和 Promise.then。")])]),t._v(" "),s("li",[s("p",[t._v("macro task 有 setTimeout、MessageChannel、postMessage、setImmediate")])])]),t._v(" "),s("h2",{attrs:{id:"vue-nexttick-实现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue-nexttick-实现"}},[t._v("#")]),t._v(" Vue NextTick 实现")]),t._v(" "),s("p",[t._v("Promise > MutationObserver > setImmediate > setTimeout")]),t._v(" "),s("p",[t._v("而对于 micro task 的实现，则检测浏览器是否原生支持 Promise，不支持的话直接指向 macro task 的实现。\n对于 macro task 的实现\n- 优先检测是否支持原生 setImmediate，这是一个高版本 IE 和 Edge 才支持的特性，\n- 不支持的话再去检测是否支持原生的 MessageChannel，\n- 如果也不支持的话就会降级为 setTimeout 0；")])])}),[],!1,null,null,null);e.default=r.exports}}]);