<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTTP 缓存有哪几种？ | blog</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="系统性学习，打造完善的知识体系">
    
    <link rel="preload" href="/interview_blog/assets/css/0.styles.81bffcaa.css" as="style"><link rel="preload" href="/interview_blog/assets/js/app.6e789ca6.js" as="script"><link rel="preload" href="/interview_blog/assets/js/2.aedcd1eb.js" as="script"><link rel="preload" href="/interview_blog/assets/js/6.f9104e5b.js" as="script"><link rel="prefetch" href="/interview_blog/assets/js/10.235d3cd2.js"><link rel="prefetch" href="/interview_blog/assets/js/11.64c88d1d.js"><link rel="prefetch" href="/interview_blog/assets/js/12.389e02a9.js"><link rel="prefetch" href="/interview_blog/assets/js/13.5fd0b99f.js"><link rel="prefetch" href="/interview_blog/assets/js/14.addbf244.js"><link rel="prefetch" href="/interview_blog/assets/js/15.aaa172ef.js"><link rel="prefetch" href="/interview_blog/assets/js/16.efde6c27.js"><link rel="prefetch" href="/interview_blog/assets/js/17.efe499ad.js"><link rel="prefetch" href="/interview_blog/assets/js/18.b43e2679.js"><link rel="prefetch" href="/interview_blog/assets/js/19.1e7d1f1d.js"><link rel="prefetch" href="/interview_blog/assets/js/20.61100763.js"><link rel="prefetch" href="/interview_blog/assets/js/21.77d90c63.js"><link rel="prefetch" href="/interview_blog/assets/js/22.f398ec5f.js"><link rel="prefetch" href="/interview_blog/assets/js/23.a0ed082a.js"><link rel="prefetch" href="/interview_blog/assets/js/24.a5e14725.js"><link rel="prefetch" href="/interview_blog/assets/js/25.dbe614ed.js"><link rel="prefetch" href="/interview_blog/assets/js/26.f2947465.js"><link rel="prefetch" href="/interview_blog/assets/js/27.ccd771c7.js"><link rel="prefetch" href="/interview_blog/assets/js/28.78bc3610.js"><link rel="prefetch" href="/interview_blog/assets/js/29.ad03d3fc.js"><link rel="prefetch" href="/interview_blog/assets/js/3.b709dd0d.js"><link rel="prefetch" href="/interview_blog/assets/js/30.12e12cb8.js"><link rel="prefetch" href="/interview_blog/assets/js/31.63b1cf5c.js"><link rel="prefetch" href="/interview_blog/assets/js/32.10ace32c.js"><link rel="prefetch" href="/interview_blog/assets/js/33.14d149d9.js"><link rel="prefetch" href="/interview_blog/assets/js/34.b8c73cce.js"><link rel="prefetch" href="/interview_blog/assets/js/35.3e8d4f21.js"><link rel="prefetch" href="/interview_blog/assets/js/36.ed8a1bb7.js"><link rel="prefetch" href="/interview_blog/assets/js/37.ce354d46.js"><link rel="prefetch" href="/interview_blog/assets/js/38.37bcf5ce.js"><link rel="prefetch" href="/interview_blog/assets/js/39.d4956b62.js"><link rel="prefetch" href="/interview_blog/assets/js/4.87406268.js"><link rel="prefetch" href="/interview_blog/assets/js/40.f0ecd4dc.js"><link rel="prefetch" href="/interview_blog/assets/js/41.01c18d9c.js"><link rel="prefetch" href="/interview_blog/assets/js/42.f229993f.js"><link rel="prefetch" href="/interview_blog/assets/js/43.f08935e7.js"><link rel="prefetch" href="/interview_blog/assets/js/44.d134aed1.js"><link rel="prefetch" href="/interview_blog/assets/js/45.dbda6222.js"><link rel="prefetch" href="/interview_blog/assets/js/46.661000b0.js"><link rel="prefetch" href="/interview_blog/assets/js/47.12709f91.js"><link rel="prefetch" href="/interview_blog/assets/js/48.d8e794b9.js"><link rel="prefetch" href="/interview_blog/assets/js/5.c38690e3.js"><link rel="prefetch" href="/interview_blog/assets/js/7.397ab168.js"><link rel="prefetch" href="/interview_blog/assets/js/8.3afdacb3.js"><link rel="prefetch" href="/interview_blog/assets/js/9.a12c6f31.js">
    <link rel="stylesheet" href="/interview_blog/assets/css/0.styles.81bffcaa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/interview_blog/" class="home-link router-link-active"><!----> <span class="site-name">blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/interview_blog/" class="nav-link">
  文章目录
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/interview_blog/" class="nav-link">
  文章目录
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/interview_blog/" aria-current="page" class="sidebar-link">JavaScript</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue3 UI</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS 基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ajax &amp; jsonp</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>http</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/interview_blog/http/cache.html" aria-current="page" class="active sidebar-link">HTTP 缓存有哪几种？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interview_blog/http/cache.html#http-1-0" class="sidebar-link">HTTP 1.0</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interview_blog/http/cache.html#缓存" class="sidebar-link">缓存</a></li></ul></li><li class="sidebar-sub-header"><a href="/interview_blog/http/cache.html#http-1-1" class="sidebar-link">HTTP/1.1</a></li><li class="sidebar-sub-header"><a href="/interview_blog/http/cache.html#强制缓存-与-协商缓存" class="sidebar-link">强制缓存 与 协商缓存</a></li><li class="sidebar-sub-header"><a href="/interview_blog/http/cache.html#http1-vs-http2" class="sidebar-link">http1 vs http2</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interview_blog/http/cache.html#多路复用" class="sidebar-link">多路复用</a></li><li class="sidebar-sub-header"><a href="/interview_blog/http/cache.html#服务器推送" class="sidebar-link">服务器推送</a></li><li class="sidebar-sub-header"><a href="/interview_blog/http/cache.html#强制开启https" class="sidebar-link">强制开启https</a></li><li class="sidebar-sub-header"><a href="/interview_blog/http/cache.html#头部压缩" class="sidebar-link">头部压缩</a></li></ul></li></ul></li><li><a href="/interview_blog/http/statusCode.html" class="sidebar-link">HTTP 状态码</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器原理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>安全</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>设计模式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>函数式编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SSR</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>react</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="http-缓存有哪几种"><a href="#http-缓存有哪几种" class="header-anchor">#</a> HTTP 缓存有哪几种？</h1> <h2 id="http-1-0"><a href="#http-1-0" class="header-anchor">#</a> HTTP 1.0</h2> <h3 id="缓存"><a href="#缓存" class="header-anchor">#</a> 缓存</h3> <p>为了减轻服务器的压力，在 HTTP/1.0 中提供了 Cache 机制。</p> <ul><li><p><code>Expires</code>：强制缓存。缓存服务器上的过期时间。</p> <ul><li>用来指定资源到期的时间</li> <li>问题：受限于本地时间。如果用户改了本地时间，就没用了</li></ul></li> <li><p><code>Last-Modified</code>：协商缓存。</p> <ul><li>资源在服务器上的最后修改时间。</li> <li>问题：一个资源被修改了，但其实际内容根本没发生改变，也会返回整个实体给客户端（即使客户端缓存里有个一模一样的资源）。</li></ul></li></ul> <blockquote><p>客户端会为资源标记上该信息，下次再次请求时，会把该信息附带在请求报文中一并带给服务器去做检查，若传递的时间值与服务器上该资源最终修改时间是一致的，则说明该资源没有被修改过，直接返回304状态码，内容为空，这样就节省了传输数据量 。如果两个时间不一致，则服务器会发回该资源并返回200状态码，和第一次请求时类似。这样保证不向客户端重复发出资源，也保证当服务器有变化时，客户端能够得到最新的资源。一个304响应比一个静态资源通常小得多，这样就节省了网络带宽。</p></blockquote> <h2 id="http-1-1"><a href="#http-1-1" class="header-anchor">#</a> HTTP/1.1</h2> <p>随着技术的发展，很快 HTTP/1.0 也不能满足需求了。</p> <ul><li><p><code>Cache-Control</code>： 强制缓存</p> <ul><li><code>Expires</code> http1.1 新增了 Cache-Control 来定义缓存过期时间 <code>max-age=3600</code>。</li></ul> <p>注意：若报文中同时出现了 <code>Expires</code> 和 <code>Cache-Control</code>，则以 Cache-Control 为准。</p></li> <li><p><code>ETag</code>：协商缓存：根据内容计算出的唯一标识符</p> <ul><li>为了解决上述 <code>Last-Modified</code> 可能存在的不准确的问题，Http1.1 还推出了 ETag 实体首部字段。</li></ul></li></ul> <h2 id="强制缓存-与-协商缓存"><a href="#强制缓存-与-协商缓存" class="header-anchor">#</a> 强制缓存 与 协商缓存</h2> <ol><li><p>浏览器在加载资源时，根据请求头的 <code>expires</code> 和 <code>cache-control</code> 判断是否命中强缓存，是则直接从缓存读取资源，不会发请求到服务器。</p></li> <li><p>如果没有命中强缓存，浏览器一定会发送一个请求到服务器，通过 <code>last-modified</code> 和 <code>etag</code> 验证资源是否命中协商缓存，如果命中，服务器会将这个请求返回，但是不会返回这个资源的数据，依然是从缓存中读取资源</p></li></ol> <p>3.如果前面两者都没有命中，直接从服务器加载资源
<img src="/interview_blog/assets/img/cache.0ff04728.jpg" alt=""></p> <h2 id="http1-vs-http2"><a href="#http1-vs-http2" class="header-anchor">#</a> http1 vs http2</h2> <p>多路复用、服务器推送、强制开启https</p> <h3 id="多路复用"><a href="#多路复用" class="header-anchor">#</a> 多路复用</h3> <p><img src="/interview_blog/assets/img/http2.348b4fb8.png" alt=""></p> <ul><li><p>每个请求都有一个对应的 ID</p> <ul><li><p>如stream1表示index.html的请求，stream2表示foo.css的请求。</p></li> <li><p>这样在浏览器端，就可以随时将请求发送给服务器了。</p></li> <li><p>是因为每份数据都有对应的ID，服务器端返回的顺序可以不固定。</p></li> <li><p>浏览器接收到之后，会筛选出相同ID的内容，将其拼接为完整的HTTP响应数据。</p></li></ul></li></ul> <h3 id="服务器推送"><a href="#服务器推送" class="header-anchor">#</a> 服务器推送</h3> <ul><li><p>将数据提前推送到浏览器。</p> <ul><li><p>比如 用户请求一个HTML⻚面</p></li> <li><p>服务器知道该HTML⻚面会引用几个重要的JavaScript文件和CSS文件</p></li> <li><p>服务器直接把这些资源都发送给浏览器</p></li> <li><p>当浏览器解析完HTML文件之后，就能直接拿到需要的CSS文件和JavaScript文件</p></li> <li><p>这对首次打开⻚面的速度起到了至关 重要的作用。</p></li></ul></li></ul> <h3 id="强制开启https"><a href="#强制开启https" class="header-anchor">#</a> 强制开启https</h3> <h3 id="头部压缩"><a href="#头部压缩" class="header-anchor">#</a> 头部压缩</h3></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">11/5/2020, 8:38:10 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/interview_blog/webpackInfo/babel.html" class="prev">
        AST、Babel、依赖
      </a></span> <span class="next"><a href="/interview_blog/http/statusCode.html">
        HTTP 状态码
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/interview_blog/assets/js/app.6e789ca6.js" defer></script><script src="/interview_blog/assets/js/2.aedcd1eb.js" defer></script><script src="/interview_blog/assets/js/6.f9104e5b.js" defer></script>
  </body>
</html>
