---
sidebarDepth: 3
---
# HTTP 缓存有哪几种？

## HTTP 1.0
### 缓存
为了减轻服务器的压力，在 HTTP/1.0 中提供了 Cache 机制。

- `Expires`：强制缓存。缓存过期时间。

    - 用来指定资源到期的时间，受限于本地时间。

- `Last-Modified`：协商缓存。资源在服务器上的最后修改时间。

## HTTP/1.1
随着技术的发展，很快 HTTP/1.0 也不能满足需求了。

- `Cache-Control`：强制缓存

    - `Expires` 时间是相对服务器而言，无法保证和客户端时间统一”的问题，http1.1新增了 Cache-Control 来定义缓存过期时间。
    
    注意：若报文中同时出现了 `Expires` 和 `Cache-Control`，则以 Cache-Control 为准。

- `ETag`：协商缓存

    - 为了解决上述 `Last-Modified` 可能存在的不准确的问题，Http1.1 还推出了 ETag 实体首部字段。
 
## 强制缓存 与 协商缓存
1. 浏览器在加载资源时，根据请求头的 `expires` 和 `cache-control` 判断是否命中强缓存，是则直接从缓存读取资源，不会发请求到服务器。
 
2. 如果没有命中强缓存，浏览器一定会发送一个请求到服务器，通过 `last-modified` 和 `etag` 验证资源是否命中协商缓存，如果命中，服务器会将这个请求返回，但是不会返回这个资源的数据，依然是从缓存中读取资源

3.如果前面两者都没有命中，直接从服务器加载资源 
![](./cache.jpg)

## http1 vs http2
- 多路复用

- 服务器推送

- 强制开启https

